# 系统测试指南

## 测试目的

确保生产设备报修、检修、物资管理平台的所有功能正常运行，特别是权限控制、数据一致性等关键需求。

## 测试环境

- 后端：Node.js + Express + MySQL
- 前端：Vue.js + Vant UI
- 测试工具：Postman（API测试）、浏览器（功能测试）

## 测试模块

### 1. 用户认证测试

**测试用例**：
- [ ] 普通员工登录
- [ ] 物资管理员登录
- [ ] 维修人员登录
- [ ] 超级管理员登录
- [ ] 错误的用户名/密码登录
- [ ] 无权限访问需要权限的页面

**测试方法**：
1. 访问登录页面
2. 输入不同角色的用户名和密码
3. 验证登录成功后能否访问对应权限的功能
4. 验证无权限用户无法访问受限功能

### 2. 设备报修模块测试

**测试用例**：
- [ ] 普通员工提交报修
- [ ] 报修时上传故障照片
- [ ] 派工单生成
- [ ] 维修人员查看派工单
- [ ] 维修人员处理派工单
- [ ] 维修完成后上传解决照片
- [ ] 维修状态更新

**测试方法**：
1. 以普通员工身份登录
2. 提交设备报修，包括故障描述和照片
3. 切换到维修人员账号，验证派工单生成
4. 处理派工单，填写解决方案并上传照片
5. 验证报修状态更新

### 3. 维修管理模块测试

**测试用例**：
- [ ] 维修人员登录后查看派工单
- [ ] 维修人员处理已解决的故障
- [ ] 维修人员处理未解决的故障（移交）
- [ ] 已解决的反馈给保修人

**测试方法**：
1. 以维修人员身份登录
2. 查看待处理的派工单
3. 选择一个派工单，标记为已解决并填写解决方案
4. 选择另一个派工单，标记为未解决并填写移交说明
5. 验证维修记录的创建和报修状态的更新

### 4. 物资管理模块测试

**测试用例**：
- [ ] 物资管理员进行物资入库
- [ ] 普通员工申领物资
- [ ] 物资管理员审批物资申领
- [ ] 物资管理员进行物资出库
- [ ] 同一物资的并发申领（原子性测试）
- [ ] 库存不足时的申领（一致性测试）

**测试方法**：
1. 以物资管理员身份登录，进行物资入库操作
2. 以普通员工身份登录，申领该物资
3. 切换回物资管理员身份，审批物资申领
4. 进行物资出库操作
5. 模拟多个用户同时申领同一物资，验证原子性
6. 尝试申领超过库存的物资，验证一致性

### 5. 员工管理模块测试

**测试用例**：
- [ ] 超级管理员添加新员工
- [ ] 超级管理员编辑员工信息
- [ ] 超级管理员删除员工
- [ ] 验证员工权限的正确分配

**测试方法**：
1. 以超级管理员身份登录
2. 添加新员工，分配不同角色
3. 编辑员工信息
4. 删除员工
5. 验证新员工的权限是否正确

## 权限控制测试重点

确保以下权限控制正确实现：

- [ ] 普通员工只能报修和申领物资
- [ ] 物资管理员只能进行物资入库和出库操作
- [ ] 维修人员只能查看和处理派工单
- [ ] 超级管理员可以操作所有模块

## 数据一致性测试重点

确保以下数据一致性：

- [ ] 物资申领时的原子性操作
- [ ] 库存数量的准确性
- [ ] 设备状态与报修/维修状态的一致性
- [ ] 派工单状态的正确流转

## 移动端适配测试

确保系统在手机端正常显示和使用：

- [ ] 页面布局适应不同屏幕尺寸
- [ ] 表单元素在手机上易于操作
- [ ] 图片上传功能在手机上正常工作

## 测试结果记录

| 测试模块 | 测试用例 | 预期结果 | 实际结果 | 状态 | 备注 |
|----------|----------|----------|----------|------|------|
| 用户认证 | 普通员工登录 | 登录成功，可访问报修和申领功能 | | | |
| 设备报修 | 提交报修 | 报修成功，生成派工单 | | | |
| 维修管理 | 处理派工单 | 维修记录创建，状态更新 | | | |
| 物资管理 | 申领物资 | 申领成功，审批后库存减少 | | | |
| 员工管理 | 添加员工 | 员工添加成功，权限正确 | | | |

## 常见问题及解决方案

### 1. 登录失败
- **原因**：用户名或密码错误
- **解决**：检查输入的用户名和密码是否正确

### 2. 权限不足
- **原因**：当前用户角色没有对应的操作权限
- **解决**：使用具有相应权限的用户登录

### 3. 上传图片失败
- **原因**：图片大小超过限制或格式不支持
- **解决**：使用符合要求的图片（大小限制5MB，支持JPG、PNG格式）

### 4. 物资申领失败
- **原因**：库存不足或权限不足
- **解决**：检查库存数量或使用具有申领权限的用户

## 测试结论

在完成所有测试用例后，总结系统的测试结果，包括：
- 系统功能是否正常运行
- 权限控制是否正确实现
- 数据一致性是否得到保证
- 移动端适配是否良好
- 是否存在需要修复的问题
